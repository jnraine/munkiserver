<h2>New package</h2>
<div id="new_package_form_container">
	<%= form_for(@package, :html => {:multipart => true, :id => "new_upload_package_form"}) do |f| %>
		<%= f.error_messages %>
		<div>
			<h3>Upload</h3>
			
				Choose a .dmg
				<%= helpful_info("You cannot upload packages, applications, or Adobe installers without wrapping them in a disk image first!") %>
			<br /><br />
			<p><%= file_field_tag :package_file %></p>
			<% unless Munki::Application::MUNKI_TOOLS_AVAILABLE %>
				<p>
					Choose a pkginfo plist
					<%= helpful_info("Generate a pkginfo plist using makepkginfo and upload it")%>
				</p>
				<p><p><%= file_field_tag :pkginfo_file %></p>
			<% end %>
		</div>
		<h4><a id="options-link" href="#">OPTIONAL</a></h4>
		<div id="options">
			<% if Munki::Application::MUNKI_TOOLS_AVAILABLE %>
				
					Choose a pkginfo plist
					<%= helpful_info("Generate a pkginfo plist using makepkginfo and upload it")%>
				<br /><br />
				<p><p><%= file_field_tag :pkginfo_file %></p>
			<% end %>
			
				<%= text_field_tag "makepkginfo_options[pkgname]" %> 
				Package name
				<%= helpful_info("From makepkginfo help page: If the upload is a disk image containing
				                  multiple packages, or the package to be installed
				                  is not at the root of the mounted disk image, this
				                  is a relative path from the root of the mounted
				                  disk image to the specific package to be installed.  
				                  If the upload is a disk image containing
				                  an Adobe CS4 Deployment Toolkit installation, pkgname
				                  is the name of an Adobe CS4 Deployment Toolkit
				                  installer package folder at the top level of the
				                  mounted dmg.
				                  If this flag is missing, the AdobeUber* files should
				                  be at the top level of the mounted dmg.") %>
				<br /><br />
				<%= text_field_tag "makepkginfo_options[appname]" %> 
				Application path
				<%= helpful_info("From makepkginfo help page: If the upload is a disk image with a
				                  drag-and-drop application, this is the name or
				                  relative path of the application
				                  to be installed. Useful if there
				                  is more than one application at the root of the dmg") %>
				<br /><br />
		</div>
		<p><%= submit_tag 'Upload' %></p>
	<% end %>
	<!-- versiontracker.com was dismantled, the following code will not work -->
		<!-- <h3>Grab</h3>
			<p>
				Find an application on macupdate.com and paste the ID or URL here
				<%= helpful_info("This only works for drag-and-drop apps wrapped in DMGs. Support will come for different cases...but not yet. The ID for an application can be found at the end of the URL: e.g. http://http://www.macupdate.com/app/mac/\n/########/application-name") %>
			</p>
			<%= form_for(@package, :html => {:multipart => true, :id => "new_version_tracker_package_form"}) do |f| %>
				<p><%= text_field_tag :version_tracker_web_id, nil, :size => 75 %></p>
				<p><%= submit_tag 'Grab' %></p>
			<% end %>
			<p><em>Large packages may take some time to process</em></p> -->
	
</div>
<div id="progress_container">
	<h4 class="title">Creating new package</h4>
	<p><%= image_tag('horizontal_progress.gif') %></p>
</div>